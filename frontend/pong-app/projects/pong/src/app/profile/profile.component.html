<div class="profile-container">
    <div *ngIf="isLoading" class="loading">
        Loading...
    </div>

    <div *ngIf="error" class="error">
        {{ error }}
    </div>

    <div *ngIf="!isLoading && !error" class="profile-content">
        <div class="profile-header">
            <h2>{{ currentUsername }}'s Profile</h2>
        </div>

        <div class="search-section">
            <h3>Find Friends</h3>
            <div class="search-box">
                <input type="text" [(ngModel)]="searchQuery" placeholder="Search users...">
                <button (click)="searchUsers()">Search</button>
            </div>
            
            <div *ngIf="searchResults.length > 0" class="search-results">
                <ul>
                    <li *ngFor="let user of searchResults">
                        {{ user.username }}
                        <button (click)="sendFriendRequest(user.username)" class="friend-request-button">
                            Send Friend Request
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <div class="friend-requests" *ngIf="friendRequests.length > 0">
            <h3>Friend Requests</h3>
            <ul>
                <li *ngFor="let request of friendRequests">
                    <span>{{ request.from_user.username }} wants to be your friend</span>
                    <div class="request-actions">
                        <button (click)="acceptFriendRequest(request)" class="accept-button">
                            Accept
                        </button>
                        <button (click)="declineFriendRequest(request.id)" class="decline-button">
                            Decline
                        </button>
                    </div>
                </li>
            </ul>
        </div>

        <div class="friends-list">
            <h3>Friends</h3>
            <div *ngIf="friends.length === 0" class="no-friends">
                No friends found
            </div>
            <ul *ngIf="friends.length > 0">
                <li *ngFor="let friend of friends" class="friend-item">
                    <span>{{ friend.username }}</span>
                    <div class="friend-actions">
                        <button (click)="startChat(friend.username)" class="chat-button">
                            Chat
                        </button>
                        <button (click)="blockUser(friend.id)" class="block-button">
                            Block
                        </button>
                    </div>
                </li>
            </ul>
        </div>

        <div class="blocked-users">
            <h3>Blocked Users</h3>
            <div *ngIf="blockedUsers.length === 0" class="no-blocked">
                No blocked users
            </div>
            <ul *ngIf="blockedUsers.length > 0">
                <li *ngFor="let user of blockedUsers" class="blocked-item">
                    <span>{{ user.username }}</span>
                    <div class="blocked-actions">
                        <button (click)="unblockUser(user.id)" class="unblock-button">
                            Unblock
                        </button>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>
